<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="main.css">
    <title>Audio Visualizer</title>
    <style media="screen">

    </style>

    <!-- <script>
      //Create a new audio object
      var audio = new Audio();
      audio.src = 'god.mp3'
      audio.controls = true;
      audio.loop = true;
      audio.autoplay = false;
      //establish all variables that analyser will use
      var canvas, ctx, source, context, analyser, fbc_array, bars, bar_x, bar_width, bar_height;
      //initialize mp3 after page loads html
      window.addEventListener('load', initMp3Player, false);

      function initMp3Player() {
        //add audio element to audiobox
        document.getElementById('audio_box').appendChild(audio);
        //assign context to new audio context object
        context = new AudioContext();
        //create analyser on context
        analyser = context.createAnalyser();
        //assign canvas to the analyser
        canvas = document.getElementById('analyser_render');
        //set canvas to 2d
        ctx = canvas.getContext('2d');
        //reroute audio playback into the graph
        source = context.createMediaElementSource(audio);
        //conect source to analyser
        source.connect(analyser);
        //send sound to context destination (speakers)
        analyser.connect(context.destination);
        frameLooper();
      }
      //frameLooper animates any audio to the frequency 60hz
      function frameLooper() {
        //sets the animation to loop
        window.requestAnimationFrame(frameLooper);
        //aqcuires array of Uint8 datatype that represents data of sound frequency
        fbc_array = new Uint8Array(analyser.frequencyBinCount);
        //get byte frequency data of fbc array
        analyser.getByteFrequencyData(fbc_array);
        //clear canvas every loop
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        //set color of bars
        ctx.fillStyle = '#00CC11';
        //100 bars render
        bars = 100;
        //renders bars at different heights every loop
        for (var i = 0; i < bars; i++) {
          //give each bar different x position at start
          bar_x = i * 3;
          //give bar width in px
          bar_width = 2;
          //make bars change height
          bar_height = -(fbc_array[i] / 2);
          //draws each bar
          ctx.fillRect(bar_x, canvas.height, bar_width, bar_height);

        }
      }

    </script> -->
  </head>
  <body>
    <div id="mp3_player">
      <div id="audio_box"></div>
      <canvas id="analyser_render"></canvas>
    </div>
    <iframe class="source" src="https://embed.spotify.com/?uri=spotify:album:5HCJzEGFCedz0DxsXhk1qG" width="300" height="380" frameborder="0" allowtransparency="true"></iframe>

    <script type="text/javascript" src="app.js">

    </script>
  </body>
</html>
